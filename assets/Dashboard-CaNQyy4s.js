import{j as e,A as m}from"./main-BFfeUCmg.js";import{r as a}from"./state-DOKsaQ-a.js";import{u as w}from"./index-DXK1WN_P.js";import{u as C}from"./usePerformanceMonitor-BK8VJ-1X.js";import"./vendor-CZvkgD4c.js";function n({title:s,value:l}){return e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 shadow-sm p-6",children:[e.jsx("h3",{className:"text-sm font-medium text-neutral-600 mb-2",children:s}),e.jsx("div",{className:"text-3xl font-semibold text-neutral-900",children:l})]})}function E(){const s=w(m.repository.owner,m.repository.name),{startTimer:l,endTimer:u}=C("dashboard"),[t,h]=a.useState(null),[p,o]=a.useState(!0),[d,c]=a.useState(null);a.useEffect(()=>{x()},[]);const x=async()=>{try{o(!0),c(null),l("data_load_ms");const[i,g,f]=await Promise.all([s.listDirectory(""),s.listDirectory("apps"),s.listDirectory("shared")]),N=g.filter(r=>r.type==="dir"),y=f.filter(r=>r.type==="dir"),v=i.filter(r=>r.type==="file").length;u("data_load_ms"),h({appCount:N.length,utilCount:y.length,fileCount:v,lastChecked:new Date})}catch(i){c(i.message)}finally{o(!1)}},b=t?`Repository contains ${t.appCount} apps, ${t.utilCount} shared modules, and ${t.fileCount} root files. Last checked: ${t.lastChecked.toLocaleString()}`:"",j=()=>{window.parent.postMessage("close-app","*")};return p?e.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[e.jsxs("div",{className:"bg-white border-b border-neutral-200 px-6 py-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-semibold text-neutral-900 mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-neutral-600",children:"Repository Statistics"})]}),e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:e.jsx("div",{className:"bg-white rounded-2xl border border-neutral-200 shadow-sm p-6",children:e.jsx("p",{className:"text-center text-neutral-500",children:"Loading..."})})})]}):d?e.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[e.jsxs("div",{className:"bg-white border-b border-neutral-200 px-6 py-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-semibold text-neutral-900 mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-neutral-600",children:"Repository Statistics"})]}),e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 shadow-sm p-6",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error: ",d]}),e.jsx("button",{className:"px-4 py-2 bg-brand-600 hover:bg-brand-700 text-white rounded-lg font-medium text-sm transition-colors",onClick:x,children:"Retry"})]})})]}):e.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[e.jsxs("div",{className:"bg-white border-b border-neutral-200 px-6 py-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-semibold text-neutral-900 mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-neutral-600",children:"Repository Statistics"})]}),e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(n,{title:"Applications",value:t?.appCount||0}),e.jsx(n,{title:"Shared Utilities",value:t?.utilCount||0}),e.jsx(n,{title:"Root Files",value:t?.fileCount||0})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-neutral-200 shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-900 mb-2",children:"Recent Activity"}),e.jsx("p",{className:"text-sm text-neutral-600 leading-relaxed",children:b})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{className:"px-5 py-2.5 bg-white hover:bg-neutral-100 border border-neutral-300 text-neutral-700 rounded-lg font-medium text-sm transition-colors",onClick:j,children:"‚Üê Back to Gallery"})})]})]})}export{E as default};
